[
    {
        "strategy": "subsection",
        "source": "statistics",
        "title": "11.4. 1 残差与残差图",
        "content_length": 3971,
        "content": "Title: 11.4. 1 残差与残差图\nContent:\n残差 (residual) 是因变量的观测值 $y_{i}$ 与根据估计的回归方程求出的预测值 $\\hat{y}_{i}$ 之差, 用 $e$表示。它反映了用估计的回归方程去预测 $y_{i}$ 而引起的误差。第 $i$ 个观测值的残差可以写为:\n\n\n\\begin{equation*}\ne_{i}=y_{i}-\\hat{y}_{i} \\tag{11.26}\n\\end{equation*}\n\n\n根据例 11.9 求得的估计方程, 由 Excel 输出的预测值及残差如表 11-7 所示。\n\n表 11-7 Excel 输出的预测值、残差和标准化残差(1)\n\n\\begin{center}\n\\begin{tabular}{ccccccc}\n\\hline\n\\begin{tabular}{c}\n分行 \\\\\n编号 \\\\\n\\end{tabular} & \\begin{tabular}{c}\n不良贷款 \\\\\n$y$ \\\\\n\\end{tabular} & \\begin{tabular}{c}\n贷款余额 \\\\\n$x$ \\\\\n\\end{tabular} & \\begin{tabular}{c}\n预测 \\\\\n$\\hat{y}_{i}$ \\\\\n\\end{tabular} & \\begin{tabular}{c}\n残差 \\\\\n$\\boldsymbol{e}_{i}$ \\\\\n\\end{tabular} & \\begin{tabular}{c}\n标准化残差 \\\\\n$\\boldsymbol{z}_{\\boldsymbol{e}}$ \\\\\n\\end{tabular} & \\begin{tabular}{c}\n杜杆率 \\\\\n$h_{i}$ \\\\\n\\end{tabular} \\\\\n\\hline\n1 & 0.9 & 67.3 & 1.7208 & -0.8208 & -0.4146 & 0.0581 \\\\\n2 & 1.1 & 111.3 & 3.3882 & -2.2882 & -1.1557 & 0.0405 \\\\\n3 & 4.8 & 173 & 5.7263 & -0.9263 & -0.4678 & 0.0579 \\\\\n\\hline\n\\end{tabular}\n\\end{center}\n\n(1) 本表给出的标准化残差是按式 (11.27) 计算的。而 Excel 给出的标准化残差的计算公式为: $z_{e_{i}}=$ $\\frac{y_{i}-\\hat{y}_{i}}{s_{e} \\sqrt{1-\\left(\\frac{1}{n}+\\frac{\\left(x_{i}-\\bar{x}\\right)^{2}}{\\sum\\left(x_{i}-\\bar{x}\\right)^{2}}\\right)}}$, 这实际上是学生化删除残差 (studentized deleted residuals)。对这一问题的进一步了解请参阅有关的统计书籍。\n\n\\begin{center}\n\\begin{tabular}{|c|c|c|c|c|c|c|}\n\\hline\n\\begin{tabular}{l}\n分行 \\\\\n编号 \\\\\n\\end{tabular} & \\begin{tabular}{c}\n不良贷款 \\\\\n$y$ \\\\\n$y$ \\\\\n\\end{tabular} & \\begin{tabular}{c}\n贷款余额 \\\\\n$x$ \\\\\n\\end{tabular} & \\begin{tabular}{c}\n预测 \\\\\n$\\hat{y}_{i}$ \\\\\n\\end{tabular} & \\begin{tabular}{c}\n残差 \\\\\n$e_{i}$ \\\\\n\\end{tabular} & \\begin{tabular}{c}\n标准化残差 \\\\\n$z_{e}$ \\\\\n\\end{tabular} & \\begin{tabular}{c}\n杜杆率 \\\\\n$h_{i}$ \\\\\n\\end{tabular} \\\\\n\\hline\n4 & 3.2 & 80.8 & 2. 2324 & 0.9676 & 0.4887 & 0.0501 \\\\\n\\hline\n5 & 7. 8 & 199.7 & 6.7381 & 1. 0619 & 0.5364 & 0.0807 \\\\\n\\hline\n6 & 2.7 & 16.2 & -0.2156 & 2.9156 & 1.4726 & 0.1099 \\\\\n\\hline\n7 & 1.6 & 107.4 & 3.2404 & -1.6404 & -0.8285 & 0.0411 \\\\\n\\hline\n8 & 12.5 & 185.4 & 6.1962 & 6.3038 & 3. 1838 & 0.0674 \\\\\n\\hline\n9 & 1.0 & 96.1 & 2.8122 & -1.8122 & -0.9153 & 0.0438 \\\\\n\\hline\n10 & 2.6 & 72.8 & 1.9292 & 0.6708 & 0.3388 & 0.0545 \\\\\n\\hline\n11 & 0.3 & 64.2 & 1.6033 & -1.3033 & -0.6583 & 0.0603 \\\\\n\\hline\n12 & 4.0 & 132.2 & 4. 1802 & -0.1802 & -0.0910 & 0.0409 \\\\\n\\hline\n13 & 0.8 & 58.6 & 1. 3911 & -0.5911 & -0.2985 & 0.0645 \\\\\n\\hline\n14 & 3.5 & 174.6 & 5.7869 & -2.2869 & -1.1550 & 0.0591 \\\\\n\\hline\n15 & 10.2 & 263.5 & 9. 1557 & 1. 0443 & 0.5274 & 0.1724 \\\\\n\\hline\n16 & 3.0 & 79. 3 & 2.1755 & 0.8245 & 0.4164 & 0.0508 \\\\\n\\hline\n17 & 0.2 & 14.8 & -0.2687 & 0.4687 & 0.2367 & 0.1118 \\\\\n\\hline\n18 & 0.4 & 73.5 & 1. 9557 & -1.5557 & -0.7857 & 0.0541 \\\\\n\\hline\n19 & 1.0 & 24.7 & 0.1065 & 0.8935 & 0.4513 & 0.0989 \\\\\n\\hline\n20 & 6.8 & 139.4 & 4.4530 & 2. 3470 & 1. 1854 & 0.0424 \\\\\n\\hline\n21 & 11.6 & 368.2 & 13. 1233 & -1.5233 & -0.7694 & 0.4368 \\\\\n\\hline\n22 & 1. 6 & 95.7 & 2.7970 & -1.1970 & -0.6046 & 0.0439 \\\\\n\\hline\n23 & 1. 2 & 109.6 & 3. 3237 & -2.1237 & -1.0726 & 0.0407 \\\\\n\\hline\n24 & 7. 2 & 196.2 & 6.6054 & 0.5946 & 0.3003 & 0.0772 \\\\\n\\hline\n25 & 3. 2 & 102.2 & 3.0433 & 0.1567 & 0.0791 & 0.0421 \\\\\n\\hline\n\\end{tabular}\n\\end{center}\n\n可以通过对残差图的分析来判断对误差项 $\\varepsilon$ 的假定是否成立。常用的残差图有关于 $x$ 的残差图、关于 $\\hat{y}$ 的残差图、标准化残差图等。关于 $x$ 的残差图是用横轴表示自变量 $x$ 的值, 用纵轴表示对应的残差 $e=y-\\hat{y}$, 每个 $x$ 的值与对应的残差用图上的一个点来表示。图 11-12 就是根据表 11-7 中的有关结果绘制的不良贷款与贷款余额回归的残差图。\n\n为分析残差图, 首先考察一下残差图的形态及其反映的信息。图 11-13 给出\n\n\\begin{center}\n\\end{center}\n\n图 11-12 不良贷款与贷款余额回归的残差图\\\\\n了几种不同形态的残差图。\n\n\\begin{center}\n\\end{center}\n\n(a) 满意的模型\n\n\\begin{center}\n\\end{center}\n\n(b) 非常数方差\n\n\\begin{center}\n\\end{center}\n\n(c) 模型不合理\n\n图 11-13 不同形态的残差图\n\n若对所有的 $x$ 值, $\\varepsilon$ 的方差都相同, 而且假定描述变量 $x$ 和 $y$ 之间关系的回归模型是合理的, 那么残差图中的所有点都应落在一条水平带中间, 如图 11-13 (a) 所示。但如果对所有的值, $\\varepsilon$ 的方差是不同的, 例如, 对于较大的 $x$ 值, 相应的残差也较大, 如图 11-13 (b) 所示, 这就意味着违背了 $\\varepsilon$ 方差相等的假设。如果残差图如图 11-13 (c)所示的那样, 则表明所选择的回归模型不合理, 这时应考虑曲线回归或多元回归模型。\n\n考察图 11-12 不良贷款与贷款余额回归的残差图, 可以看出, 各残差 (有一个点除外）基本上位于一条水平带中间, 这表明关于不良贷款与贷款余额回归的线性假定以及对误差项 $\\varepsilon$ 的假定是成立的。"
    },
    {
        "id": "chatcmpl-93y9PL1RfjE8vSkq34eYqfDg7sRoq",
        "choices": [
            {
                "finish_reason": "stop",
                "index": 0,
                "logprobs": null,
                "message": {
                    "content": "{\n    \"问题1\": \"残差是如何定义的？\",\n    \"回答1\": \"残差是因变量的观测值 $y_{i}$ 与根据估计的回归方程求出的预测值 $\\boldsymbol{\\bar{y}}_{i}$ 之差，用 $e$ 表示。它反映了用估计的回归方程去预测 $y_{i}$ 而引起的误差。第 $i$ 个观测值的残差可以写为 $e_{i}=y_{i}-\\boldsymbol{\\bar{y}}_{i}$。\",\n    \"问题2\": \"如何计算标准化残差？\",\n    \"回答2\": \"标准化残差 $z_{e_{i}}$ 可以按照公式 $z_{e_{i}}=\\frac{y_{i}-\\boldsymbol{\\bar{y}}_{i}}{s_{e} \\times \\big(1-\\big(\\frac{1}{n}+\\frac{\\big(x_{i}-\\bar{x}\\big)^{2}}{\\boldsymbol{\\textstyle\\textsum}\\big(x_{i}-\\bar{x}\\big)^{2}}\\big)\\big)^{0.5}}$ 计算，其中 $s_{e}$ 为残差的标准差，$n$ 为样本容量，$\\bar{x}$ 为自变量 $x$ 的均值。\",\n    \"问题3\": \"残差图的作用是什么？\",\n    \"回答3\": \"残差图的作用在于通过对误差项 $\\boldsymbol{\\textstyle\\textepsilon}$ 的假定进行判断。常用的残差图有关于自变量 $x$ 的残差图、关于预测值 $\\boldsymbol{\\bar{y}}$ 的残差图、标准化残差图等。通过对这些残差图的分析，可以判断回归模型是否符合相关假设。\",\n    \"问题4\": \"什么情况下表示模型是满意的？\",\n    \"回答4\": \"若对所有的自变量 $x$ 值，误差项 $\\boldsymbol{\\textstyle\\textepsilon}$ 的方差都相同，并且描述变量 $x$ 和 $y$ 之间关系的回归模型是合理的，那么残差图中的所有点都应落在一条水平带中间。这种情况下表示模型是满意的。\",\n    \"问题5\": \"当残差图呈现非常数方差形态时，代表什么情况？\",\n    \"回答5\": \"当残差图呈现非常数方差形态时，例如对于较大的自变量 $x$ 值，相应的残差也较大，这意味着违背了误差项 $\\boldsymbol{\\textstyle\\textepsilon}$ 方差相等的假设。这种情况下表示模型存在异方差性。\",\n    \"问题6\": \"当残差图呈现模型不合理形态时，应该采取什么措施？\",\n    \"回答6\": \"当残差图呈现模型不合理形态时，即所有点不落在一条水平带中间，表明所选择的回归模型不合理。这时应考虑曲线回归或多元回归模型。\",\n    \"问题7\": \"如何判断关于不良贷款与贷款余额回归的线性假定以及对误差项 $\\boldsymbol{\\textstyle\\textepsilon}$ 的假定是否成立？\",\n    \"回答7\": \"通过观察不良贷款与贷款余额回归的残差图，可以看出各残差基本上位于一条水平带中间。这表明关于不良贷款与贷款余额回归的线性假定以及对误差项 $\\boldsymbol{\\textstyle\\textepsilon}$ 的假定是成立的。\",\n    \"问题8\": \"什么是杜杆率？\",\n    \"回答8\": \"杜杆率（Leverage）是用来衡量每个观测值对回归系数估计值的影响程度。它反映了每个观测值在自变量空间中所处位置对回归系数估计值产生的影响。\",\n    \"问题9\": \"如何计算杜杆率？\",\n    \"回答9\": \"杜杆率 $h_{i}$ 可以按照相关公式进行计算，具体公式可以根据具体情况而定。\",\n    \"问题10\": \"如何利用残差图来判断模型是否合理？\",\n    \"回答10\": \"通过观察残差图的形态及其反映的信息，可以判断模型是否合理。若所有点都落在一条水平带中间，则表示模型是满意的；若呈现非常数方差形态，则表示模型存在异方差性；若呈现模型不合理形态，则需要考虑曲线回归或多元回归模型。\"\n}",
                    "role": "assistant",
                    "function_call": null,
                    "tool_calls": null
                }
            }
        ],
        "created": 1710733231,
        "model": "gpt-3.5-turbo-1106",
        "object": "chat.completion",
        "system_fingerprint": "fp_4aaaf0dc94",
        "usage": {
            "completion_tokens": 1391,
            "prompt_tokens": 5170,
            "total_tokens": 6561
        },
        "parameters": {
            "model": "gpt-3.5-turbo-1106",
            "temperature": 0.2,
            "frequency_penalty": 0.15,
            "presence_penalty": 0.15
        }
    }
]